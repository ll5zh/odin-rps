<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odin Rock, Paper, Scissors</title>
    <link rel="stylesheet" href="./style.css"/>
</head>
<body>

<div class="header">Play Rock, Paper, Scissors!</div>

<div class="intro">
    <div class="ment">
        Welcome to Rock, Paper, Scissors! Click on one of the buttons below in order to choose your player. See if you can win against the computer's choice!
    </div>
    <div class="rules">
        Here are the rules:
        <ul>
            <li>ROCK beats SCISSORS</li>
            <li>PAPER beats ROCK</li>
            <li>SCISSORS beats PAPER</li>
        </ul>
        Good luck/Have fun!
    </div>
</div>

<div class="choices">
    <div class="btn" id="rock">Rock</div>
    <div class="btn" id="paper">Paper</div>
    <div class="btn" id="scissors">Scissors</div>
</div>

<div class="score">
    <div class="user">
        <div id="user-head">Your Score</div>
        <div id="user-score">0</div>
    </div>
    <div class="computer">
        <div id="computer-head">Computer Score</div>
        <div id="computer-score">0</div>
    </div>
</div>

<script>

    const userScore = document.querySelector('#user-score');
    const compScore = document.querySelector('#computer-score');

    function getComputerChoice() {
        let compNum = Math.floor(Math.random() * 3);
        switch (compNum) {
            case 0:
                return "rock";
            case 1:
                return "paper";
            case 2:
                return "scissors";
        }
    }

    let playerStatus;

    function playRound(playerSelection, computerSelection) {
        if (playerSelection == "rock" && computerSelection == "paper") {
            playerStatus = "lose";
        } else if (playerSelection == "paper" && computerSelection == "scissors") {
            playerStatus = "lose";
        } else if (playerSelection == "scissors" && computerSelection == "rock") {
            playerStatus = "lose";
        } else if (playerSelection == "rock" && computerSelection == "scissors") {
            playerStatus = "win";
        } else if (playerSelection == "paper" && computerSelection == "rock") {
            playerStatus = "win";
        } else if (playerSelection == "scissors" && computerSelection == "paper") {
            playerStatus = "win";
        } else if (playerSelection == computerSelection) {
            playerStatus = "tie";
        }
        let message = "error.";
        if (playerStatus == "tie") {
            message = "it's a tie! both players chose " + playerSelection + ".";
        } else if (playerStatus == "lose") {
            message = "you lose! " + computerSelection + " beats " + playerSelection + ".";
        } else if (playerStatus == "win"){
            message = "you win! " + playerSelection + " beats " + computerSelection + ".";
        }

        if (playerStatus == "win") {
            ++userScore.innerHTML;
        } else if (playerStatus == "lose") {
            ++compScore.innerHTML;
        }
        alert(message);

        if (userScore.innerHTML == 5) {
            alert("Congrats, you win! Best 3 out of 5 :)");
            userScore.innerHTML = 0;
            compScore.innerHTML = 0;
        } else if (compScore.innerHTML == 5) {
            alert("Rats, you lost! Best 3 ouf ot 5 :(");
            userScore.innerHTML = 0;
            compScore.innerHTML = 0;
        }
    }

    const r = document.querySelector('#rock');
    const p = document.querySelector('#paper');
    const s = document.querySelector('#scissors');
    //console.log(scissors);

    r.addEventListener('click', function (e) {
        playRound('rock', getComputerChoice());
    });
    p.addEventListener('click', function (e) {
        playRound('paper', getComputerChoice())
    });
    s.addEventListener('click', function (e) {
        playRound('scissors', getComputerChoice())
    });

</script>
</body>
</html>